> 在 C 语言中，errno 是存放错误码的全局变量。为了防止和正常的返回值混淆，系统一般不直接返回错误码，而是将错误码（一个整数值，不同值代表不同含义）存入一个名为 errno 的全局变量中，errno 不同数值代表的错误消息定义在 <errno.h> 文件中。如果一个`系统调用或库函数调用失败`，可以通过读出 errno 的值来确定问题。

配合 `perror` 和 `strerror` 函数，可以方便的查出错误的详细信息。

* perror 在 <stdio.h> 中定义，用于打印错误码及消息描述
* strerror 在 <string.h> 中定义，用于获取错误码对应的消息描述



> 注意：
>
> * 程序刚刚启动的时候，errno 被设置为 0
> * 不能完全依靠 errno 返回值来查找错误，因为有的函数不保证设置 errno 的值。有返回值的函数应该先根据返回值确定问题，确定需要，再检查 errno 的值。
> * errno 在调用库函数之前应该先清零，因为在 C 语言中，如果系统调用或者函数库被正确执行，errno 并不会被清零。errno 的值只有在一个库函数调用发生错误时才会被设置，当库函数调用成功运行时，errno 的值不会被修改，当然也不会主动被置为 0。也正因为如此，在实际编程中进行错误诊断会有不少问题。
> * 即使系统调用或者库函数正确执行，也不能够保证 errno 的值不会被改变。最好先检查函数返回值再检查 errno。
> * 建议在使用 errno 的值之前，必须先将其值赋给另外一个变量保存起来，因为很多函数（如 fprintf）自身就可能会改变 errno 的值。



### 参考文章

[errno 全局变量及使用细则](http://c.biancheng.net/c/errno/)